#!/usr/bin/env sh

# Disabled pre-commit hook
exit 0

. "$(dirname -- "$0")/_/husky.sh"

# Run quick CI checks before commit
echo "🔍 Running pre-commit CI checks..."

# Run linting and formatting
npm run lint
npm run format

# Run theme sync to ensure deterministic generation
npm run theme:sync

# Check for unstaged changes after theme sync
if [[ -n "$(git status --porcelain)" ]]; then
  echo "❌ Theme sync generated changes. Please commit them:"
  git status --porcelain
  exit 1
fi

# Run TypeScript build
npm run build

# Run tests
npm test --silent

echo "✅ Pre-commit checks passed!"