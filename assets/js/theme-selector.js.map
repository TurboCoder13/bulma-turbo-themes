{"version":3,"file":"theme-selector.js","sources":["../../packages/theme-selector/dist/constants.js","../../packages/theme-selector/dist/errors.js","../../packages/theme-selector/dist/storage.js","../../packages/theme-selector/dist/theme-loader.js","../../packages/theme-selector/dist/dropdown/helpers.js","../../packages/core/dist/tokens/index.js","../../packages/theme-selector/dist/theme-mapper.js","../../packages/theme-selector/dist/theme-resolver.js","../../packages/theme-selector/dist/apply-theme.js","../../packages/theme-selector/dist/dropdown/state.js","../../packages/theme-selector/dist/dropdown/events.js","../../packages/theme-selector/dist/dropdown/ui.js","../../packages/theme-selector/dist/navbar.js","../../packages/theme-selector/dist/accessibility.js","../../packages/theme-selector/dist/index.js"],"sourcesContent":["// SPDX-License-Identifier: MIT\n/**\n * Constants for theme selector component\n */\nexport const STORAGE_KEY = 'turbo-theme';\nexport const LEGACY_STORAGE_KEYS = ['bulma-theme-flavor'];\nexport const DEFAULT_THEME = 'catppuccin-mocha';\n// DOM element IDs and selectors - centralized to avoid magic strings\nexport const DOM_IDS = {\n    THEME_FLAVOR_TRIGGER: 'theme-flavor-trigger',\n    THEME_FLAVOR_TRIGGER_ICON: 'theme-flavor-trigger-icon',\n    THEME_FLAVOR_MENU: 'theme-flavor-menu',\n    THEME_FLAVOR_SELECT: 'theme-flavor-select',\n};\nexport const DOM_SELECTORS = {\n    DROPDOWN_ITEMS: `#${DOM_IDS.THEME_FLAVOR_MENU} .dropdown-item.theme-item`,\n    NAVBAR_DROPDOWN: '.navbar-item.has-dropdown',\n    NAV_REPORTS: '[data-testid=\"nav-reports\"]',\n    NAVBAR_ITEM: '.navbar-item',\n    HIGHLIGHT_PRE: '.highlight > pre',\n    THEME_CSS_LINKS: 'link[id^=\"theme-\"][id$=\"-css\"]',\n};\nexport const THEME_FAMILIES = {\n    bulma: { name: 'Bulma', description: 'Classic Bulma themes' },\n    catppuccin: { name: 'Catppuccin', description: 'Soothing pastel themes' },\n    github: { name: 'GitHub', description: 'GitHub-inspired themes' },\n    dracula: { name: 'Dracula', description: 'Dark vampire aesthetic' },\n};\n//# sourceMappingURL=constants.js.map","// SPDX-License-Identifier: MIT\n/**\n * Centralized error handling for Turbo Themes.\n *\n * Provides a consistent error logging strategy with standardized message\n * formatting, error levels, and optional context for debugging.\n */\n/** Log prefix for all theme-related messages */\nexport const LOG_PREFIX = '[turbo-themes]';\n/** Error severity levels */\nexport var ErrorLevel;\n(function (ErrorLevel) {\n    ErrorLevel[\"WARN\"] = \"warn\";\n    ErrorLevel[\"ERROR\"] = \"error\";\n})(ErrorLevel || (ErrorLevel = {}));\n/**\n * Factory functions for creating structured theme errors.\n * Each function returns a ThemeError with appropriate code, message, and level.\n */\nexport const ThemeErrors = {\n    /** Invalid theme ID provided */\n    INVALID_THEME_ID: (themeId) => ({\n        code: 'INVALID_THEME_ID',\n        message: `Invalid theme ID \"${themeId}\" not saved to storage`,\n        level: ErrorLevel.WARN,\n        context: { themeId },\n    }),\n    /** No themes available in registry */\n    NO_THEMES_AVAILABLE: () => ({\n        code: 'NO_THEMES_AVAILABLE',\n        message: 'No themes available',\n        level: ErrorLevel.ERROR,\n    }),\n    /** Invalid theme icon path */\n    INVALID_ICON_PATH: (themeId) => ({\n        code: 'INVALID_ICON_PATH',\n        message: `Invalid theme icon path for ${themeId}`,\n        level: ErrorLevel.WARN,\n        context: { themeId },\n    }),\n    /** Theme initialization failed */\n    INIT_FAILED: (error) => ({\n        code: 'INIT_FAILED',\n        message: 'Theme switcher initialization failed',\n        level: ErrorLevel.ERROR,\n        context: { error: error instanceof Error ? error.message : String(error) },\n    }),\n    /** Protocol-relative URL rejected for security */\n    PROTOCOL_REJECTED: () => ({\n        code: 'PROTOCOL_REJECTED',\n        message: 'Protocol-relative base URL rejected for security',\n        level: ErrorLevel.WARN,\n    }),\n    /** Insecure HTTP URL rejected */\n    INSECURE_HTTP_REJECTED: () => ({\n        code: 'INSECURE_HTTP_REJECTED',\n        message: 'Insecure HTTP base URL rejected',\n        level: ErrorLevel.WARN,\n    }),\n    /** Cross-origin URL rejected */\n    CROSS_ORIGIN_REJECTED: (origin) => ({\n        code: 'CROSS_ORIGIN_REJECTED',\n        message: `Cross-origin base URL rejected: ${origin}`,\n        level: ErrorLevel.WARN,\n        context: { origin },\n    }),\n    /** Invalid CSS path for theme */\n    INVALID_CSS_PATH: (themeId) => ({\n        code: 'INVALID_CSS_PATH',\n        message: `Invalid theme CSS path for ${themeId}`,\n        level: ErrorLevel.WARN,\n        context: { themeId },\n    }),\n    /** CSS failed to load */\n    CSS_LOAD_FAILED: (themeId, error) => ({\n        code: 'CSS_LOAD_FAILED',\n        message: `Theme CSS failed to load for ${themeId}`,\n        level: ErrorLevel.WARN,\n        context: {\n            themeId,\n            error: error instanceof Error ? error.message : String(error),\n        },\n    }),\n    /** Storage unavailable (private browsing or disabled) */\n    STORAGE_UNAVAILABLE: (operation, error) => ({\n        code: 'STORAGE_UNAVAILABLE',\n        message: `localStorage ${operation} failed - storage may be unavailable`,\n        level: ErrorLevel.WARN,\n        context: {\n            operation,\n            error: error instanceof Error ? error.message : String(error),\n        },\n    }),\n};\n/**\n * Log a theme error to the console with consistent formatting.\n *\n * @param themeError - The structured error to log\n */\nexport function logThemeError(themeError) {\n    const prefixedMessage = `${LOG_PREFIX} ${themeError.message}`;\n    if (themeError.level === ErrorLevel.ERROR) {\n        if (themeError.context) {\n            console.error(prefixedMessage, themeError.context);\n        }\n        else {\n            console.error(prefixedMessage);\n        }\n    }\n    else {\n        if (themeError.context) {\n            console.warn(prefixedMessage, themeError.context);\n        }\n        else {\n            console.warn(prefixedMessage);\n        }\n    }\n}\n/**\n * Convenience function to log a ThemeError.\n *\n * @param error - The ThemeError instance to log\n */\nexport function logError(error) {\n    logThemeError(error);\n}\n//# sourceMappingURL=errors.js.map","// SPDX-License-Identifier: MIT\n/**\n * Storage utilities for theme persistence\n */\nimport { STORAGE_KEY, LEGACY_STORAGE_KEYS, DEFAULT_THEME } from './constants.js';\nimport { ThemeErrors, logThemeError } from './errors.js';\n// Re-export DEFAULT_THEME for convenience\nexport { DEFAULT_THEME } from './constants.js';\n/**\n * Safely get an item from localStorage.\n * Returns null if storage is unavailable (e.g., private browsing mode).\n */\nfunction safeGetItem(windowObj, key) {\n    try {\n        return windowObj.localStorage.getItem(key);\n    }\n    catch (error) {\n        logThemeError(ThemeErrors.STORAGE_UNAVAILABLE('getItem', error));\n        return null;\n    }\n}\n/**\n * Safely set an item in localStorage.\n * Returns false if storage is unavailable.\n */\nfunction safeSetItem(windowObj, key, value) {\n    try {\n        windowObj.localStorage.setItem(key, value);\n        return true;\n    }\n    catch (error) {\n        logThemeError(ThemeErrors.STORAGE_UNAVAILABLE('setItem', error));\n        return false;\n    }\n}\n/**\n * Safely remove an item from localStorage.\n * Silently fails if storage is unavailable.\n */\nfunction safeRemoveItem(windowObj, key) {\n    try {\n        windowObj.localStorage.removeItem(key);\n    }\n    catch (error) {\n        logThemeError(ThemeErrors.STORAGE_UNAVAILABLE('removeItem', error));\n    }\n}\n/**\n * Validates a theme ID against a set of valid IDs.\n * Returns the theme ID if valid, otherwise returns the default theme.\n */\nexport function validateThemeId(themeId, validIds) {\n    if (themeId && validIds.has(themeId)) {\n        return themeId;\n    }\n    return DEFAULT_THEME;\n}\n/**\n * Migrates legacy storage keys to the current format.\n * Safely handles unavailable localStorage (e.g., private browsing).\n */\nexport function migrateLegacyStorage(windowObj) {\n    for (const legacyKey of LEGACY_STORAGE_KEYS) {\n        const legacy = safeGetItem(windowObj, legacyKey);\n        if (legacy && !safeGetItem(windowObj, STORAGE_KEY)) {\n            safeSetItem(windowObj, STORAGE_KEY, legacy);\n            safeRemoveItem(windowObj, legacyKey);\n        }\n    }\n}\n/**\n * Gets the saved theme from localStorage, or returns default.\n * Optionally validates against a set of valid theme IDs.\n * Safely handles unavailable localStorage (e.g., private browsing).\n */\nexport function getSavedTheme(windowObj, validIds) {\n    const stored = safeGetItem(windowObj, STORAGE_KEY);\n    if (validIds) {\n        return validateThemeId(stored, validIds);\n    }\n    return stored || DEFAULT_THEME;\n}\n/**\n * Saves a theme to localStorage.\n * Optionally validates the theme ID against a set of valid IDs before saving.\n * Safely handles unavailable localStorage (e.g., private browsing).\n *\n * @param windowObj - Window object with localStorage\n * @param themeId - Theme ID to save\n * @param validIds - Optional set of valid theme IDs for validation\n * @returns true if saved successfully, false otherwise\n */\nexport function saveTheme(windowObj, themeId, validIds) {\n    if (validIds && !validIds.has(themeId)) {\n        logThemeError(ThemeErrors.INVALID_THEME_ID(themeId));\n        return false;\n    }\n    return safeSetItem(windowObj, STORAGE_KEY, themeId);\n}\n//# sourceMappingURL=storage.js.map","// SPDX-License-Identifier: MIT\n/**\n * Theme CSS loading utilities\n */\nimport { DOM_SELECTORS } from './constants.js';\nimport { ThemeErrors, logThemeError } from './errors.js';\n/**\n * Resolves an asset path relative to the site's base URL.\n */\nexport function resolveAssetPath(assetPath, baseUrl) {\n    // Normalize baseUrl - remove trailing slash if present, then add one\n    const normalizedBase = baseUrl.replace(/\\/$/, '');\n    const base = normalizedBase ? `${window.location.origin}${normalizedBase}/` : `${window.location.origin}/`;\n    return new URL(assetPath, base).pathname;\n}\n/**\n * Gets the base URL from the document's data-baseurl attribute.\n * Validates the URL to prevent injection attacks:\n * - Rejects protocol-relative URLs (//example.com)\n * - Rejects non-HTTPS absolute URLs (except localhost)\n * - Only allows same-origin or relative paths\n */\nexport function getBaseUrl(doc) {\n    const baseElement = doc.documentElement;\n    const raw = baseElement?.getAttribute('data-baseurl') || '';\n    // Empty base URL is valid (use site root)\n    if (!raw)\n        return '';\n    // Reject protocol-relative URLs (security risk)\n    if (raw.startsWith('//')) {\n        logThemeError(ThemeErrors.PROTOCOL_REJECTED());\n        return '';\n    }\n    // Reject non-HTTPS absolute URLs (except localhost for development)\n    if (raw.startsWith('http://') && !raw.startsWith('http://localhost')) {\n        logThemeError(ThemeErrors.INSECURE_HTTP_REJECTED());\n        return '';\n    }\n    try {\n        // Parse relative to current origin to validate\n        const currentOrigin = typeof window !== 'undefined' ? window.location.origin : 'http://localhost';\n        const u = new URL(raw, currentOrigin);\n        // Only allow same-origin URLs or relative paths\n        if (u.origin !== currentOrigin) {\n            logThemeError(ThemeErrors.CROSS_ORIGIN_REJECTED(u.origin));\n            return '';\n        }\n        return u.pathname.replace(/\\/$/, '');\n    }\n    catch {\n        return '';\n    }\n}\n/**\n * Clears onload/onerror handlers from a link element to prevent memory leaks.\n */\nfunction clearLinkHandlers(link) {\n    link.onload = null;\n    link.onerror = null;\n}\n/**\n * Loads a CSS file with a timeout, returning a promise that resolves when loaded.\n */\nexport function loadCSSWithTimeout(link, themeId, timeoutMs = 10000) {\n    return new Promise((resolve, reject) => {\n        const timeoutId = setTimeout(() => {\n            clearLinkHandlers(link);\n            reject(new Error(`Theme ${themeId} load timeout`));\n        }, timeoutMs);\n        link.onload = () => {\n            clearTimeout(timeoutId);\n            clearLinkHandlers(link);\n            resolve();\n        };\n        link.onerror = () => {\n            clearTimeout(timeoutId);\n            clearLinkHandlers(link);\n            reject(new Error(`Failed to load theme ${themeId}`));\n        };\n    });\n}\n/**\n * Gets the current theme from document element classes\n */\nexport function getCurrentThemeFromClasses(element) {\n    const classList = Array.from(element.classList);\n    for (const className of classList) {\n        if (className.startsWith('theme-')) {\n            return className.substring(6); // Remove 'theme-' prefix\n        }\n    }\n    return null;\n}\n/**\n * Applies theme class to document element\n */\nexport function applyThemeClass(doc, themeId) {\n    // Remove existing theme classes in a single batch operation\n    const themeClasses = Array.from(doc.documentElement.classList).filter((className) => className.startsWith('theme-'));\n    if (themeClasses.length > 0) {\n        doc.documentElement.classList.remove(...themeClasses);\n    }\n    // Add the new theme class\n    doc.documentElement.classList.add(`theme-${themeId}`);\n}\n/**\n * Loads theme CSS file if not already loaded\n */\nexport async function loadThemeCSS(doc, theme, baseUrl) {\n    const themeLinkId = `theme-${theme.id}-css`;\n    let themeLink = doc.getElementById(themeLinkId);\n    if (!themeLink) {\n        themeLink = doc.createElement('link');\n        themeLink.id = themeLinkId;\n        themeLink.rel = 'stylesheet';\n        themeLink.type = 'text/css';\n        themeLink.setAttribute('data-theme-id', theme.id);\n        try {\n            themeLink.href = resolveAssetPath(theme.cssFile, baseUrl);\n        }\n        catch {\n            logThemeError(ThemeErrors.INVALID_CSS_PATH(theme.id));\n            return;\n        }\n        doc.head.appendChild(themeLink);\n        // Wait for CSS to load (but don't fail if it doesn't load)\n        try {\n            await loadCSSWithTimeout(themeLink, theme.id);\n        }\n        catch (error) {\n            logThemeError(ThemeErrors.CSS_LOAD_FAILED(theme.id, error));\n        }\n    }\n    // Clean up old theme CSS links (keep current and base themes)\n    doc.querySelectorAll(DOM_SELECTORS.THEME_CSS_LINKS).forEach((link) => {\n        const linkThemeId = link.id.replace('theme-', '').replace('-css', '');\n        if (linkThemeId !== theme.id && linkThemeId !== 'base') {\n            link.remove();\n        }\n    });\n}\n//# sourceMappingURL=theme-loader.js.map","// SPDX-License-Identifier: MIT\n/**\n * Dropdown helper functions\n */\n/**\n * Sets the active state (is-active class and aria-checked) on a theme item element.\n */\nexport function setItemActiveState(item, isActive) {\n    if (isActive) {\n        item.classList.add('is-active');\n    }\n    else {\n        item.classList.remove('is-active');\n    }\n    item.setAttribute('aria-checked', String(isActive));\n}\n/**\n * Sets tabindex attribute on all items in a collection.\n */\nexport function setTabindexBatch(items, value) {\n    for (const item of items) {\n        item.setAttribute('tabindex', value);\n    }\n}\n//# sourceMappingURL=helpers.js.map","// SPDX-License-Identifier: MIT\n/**\n * Platform-agnostic design tokens export\n *\n * This module exports pure theme data (colors, typography, etc.) without\n * any DOM, CSS, or platform-specific code. Use this for:\n *\n * - React Native apps\n * - Flutter apps (via JSON export)\n * - iOS/Android native apps\n * - Any platform that needs theme colors\n *\n * For web apps, you can also import the CSS files directly:\n * import '@turbocoder13/turbo-themes/css/catppuccin-mocha.css'\n */\n// Import tokens data (copied from dist/tokens.json during build)\nimport tokensData from '../themes/tokens.json' with { type: 'json' };\nconst tokens = tokensData;\n/**\n * All available theme flavors as a flat array\n */\nexport const flavors = Object.values(tokens.themes).map((theme) => ({\n    id: theme.id,\n    label: theme.label,\n    vendor: theme.vendor,\n    appearance: theme.appearance,\n    ...(theme.iconUrl !== undefined && { iconUrl: theme.iconUrl }),\n    tokens: theme.tokens,\n}));\n/**\n * Theme flavors indexed by ID for quick lookup\n */\nexport const themesById = Object.fromEntries(flavors.map((flavor) => [flavor.id, flavor]));\n/**\n * All available theme packages (grouped by vendor)\n */\nexport const packages = Object.fromEntries(Object.entries(tokens.byVendor).map(([vendorId, vendor]) => [\n    vendorId,\n    {\n        id: vendorId,\n        name: vendor.name,\n        homepage: vendor.homepage,\n        flavors: vendor.themes.map((themeId) => themesById[themeId]).filter(Boolean),\n    },\n]));\n/**\n * Get a theme by ID\n * @param id - Theme identifier (e.g., 'catppuccin-mocha')\n * @returns The theme flavor or undefined if not found\n */\nexport function getTheme(id) {\n    return themesById[id];\n}\n/**\n * Get theme tokens by ID (convenience function)\n * @param id - Theme identifier (e.g., 'catppuccin-mocha')\n * @returns The theme tokens or undefined if not found\n */\nexport function getTokens(id) {\n    return themesById[id]?.tokens;\n}\n/**\n * Get all themes matching an appearance (light/dark)\n * @param appearance - 'light' or 'dark'\n * @returns Array of matching theme flavors\n */\nexport function getThemesByAppearance(appearance) {\n    return flavors.filter((f) => f.appearance === appearance);\n}\n/**\n * Get all themes from a specific vendor\n * @param vendor - Vendor name (e.g., 'catppuccin', 'github')\n * @returns Array of matching theme flavors\n */\nexport function getThemesByVendor(vendor) {\n    return flavors.filter((f) => f.vendor === vendor);\n}\n/**\n * List of all available theme IDs\n */\nexport const themeIds = flavors.map((f) => f.id);\n/**\n * List of all available vendors\n */\nexport const vendors = [...new Set(flavors.map((f) => f.vendor))];\n//# sourceMappingURL=index.js.map","// SPDX-License-Identifier: MIT\n/**\n * Maps core theme flavors to UI-specific format\n */\n// ============================================================================\n// Lookup Tables\n// ============================================================================\n/** Vendor to family mapping */\nconst VENDOR_FAMILY_MAP = {\n    bulma: 'bulma',\n    catppuccin: 'catppuccin',\n    github: 'github',\n    dracula: 'dracula',\n};\nconst DEFAULT_FAMILY = 'bulma';\nconst VENDOR_ICON_MAP = {\n    bulma: 'assets/img/turbo-themes-logo.png',\n    catppuccin: {\n        light: 'assets/img/catppuccin-logo-latte.png',\n        dark: 'assets/img/catppuccin-logo-macchiato.png',\n    },\n    github: {\n        light: 'assets/img/github-logo-light.png',\n        dark: 'assets/img/github-logo-dark.png',\n    },\n    dracula: 'assets/img/dracula-logo.png',\n};\n/** Predefined flavor descriptions */\nconst FLAVOR_DESCRIPTIONS = {\n    'bulma-light': 'Classic Bulma look with a bright, neutral palette.',\n    'bulma-dark': 'Dark Bulma theme tuned for low-light reading.',\n    'catppuccin-latte': 'Light, soft Catppuccin palette for daytime use.',\n    'catppuccin-frappe': 'Balanced dark Catppuccin theme for focused work.',\n    'catppuccin-macchiato': 'Deep, atmospheric Catppuccin variant with rich contrast.',\n    'catppuccin-mocha': 'Cozy, high-contrast Catppuccin theme for late-night sessions.',\n    dracula: 'Iconic Dracula dark theme with vibrant accents.',\n    'github-light': 'GitHub-inspired light theme suited for documentation and UI heavy pages.',\n    'github-dark': 'GitHub dark theme optimized for code-heavy views.',\n};\n// ============================================================================\n// Helper Functions\n// ============================================================================\n/**\n * Gets the theme family from vendor name\n */\nfunction getFamily(vendor) {\n    return VENDOR_FAMILY_MAP[vendor] ?? DEFAULT_FAMILY;\n}\n/**\n * Gets icon path for a vendor\n */\nfunction getIconForVendor(vendor, appearance) {\n    const iconConfig = VENDOR_ICON_MAP[vendor];\n    if (!iconConfig) {\n        return undefined;\n    }\n    if (typeof iconConfig === 'string') {\n        return iconConfig;\n    }\n    return iconConfig[appearance];\n}\n/**\n * Gets description for a flavor\n */\nfunction getDescriptionForFlavor(id, label) {\n    return FLAVOR_DESCRIPTIONS[id] ?? `${label} theme`;\n}\n/**\n * Extracts preview colors from theme tokens\n */\nfunction extractPreviewColors(tokens) {\n    return {\n        bg: tokens.background.base,\n        surface: tokens.background.surface,\n        accent: tokens.brand.primary,\n        text: tokens.text.primary,\n    };\n}\n// ============================================================================\n// Public API\n// ============================================================================\n/**\n * Maps a canonical theme flavor to UI-specific format\n */\nexport function mapFlavorToUI(flavor) {\n    const family = getFamily(flavor.vendor);\n    return {\n        id: flavor.id,\n        name: flavor.label,\n        description: getDescriptionForFlavor(flavor.id, flavor.label),\n        cssFile: `packages/css/dist/themes/${flavor.id}.css`,\n        icon: getIconForVendor(flavor.vendor, flavor.appearance),\n        family,\n        vendor: flavor.vendor,\n        appearance: flavor.appearance,\n        colors: extractPreviewColors(flavor.tokens),\n    };\n}\n//# sourceMappingURL=theme-mapper.js.map","// SPDX-License-Identifier: MIT\n/**\n * Theme resolution utilities - centralized theme lookup and validation.\n *\n * Provides cached access to theme data and validation to avoid\n * repeated mapping and set creation across the codebase.\n */\nimport { flavors } from '@turbocoder13/turbo-themes-core';\nimport { mapFlavorToUI } from './theme-mapper.js';\nimport { DEFAULT_THEME } from './constants.js';\n// Cache mapped themes and valid IDs\nlet mappedThemes = null;\nlet validThemeIds = null;\n/**\n * Gets all themes mapped to UI format.\n * Results are cached for performance.\n */\nexport function getThemes() {\n    if (!mappedThemes) {\n        mappedThemes = flavors.map(mapFlavorToUI);\n    }\n    return mappedThemes || [];\n}\n/**\n * Gets a Set of all valid theme IDs.\n * Results are cached for performance.\n */\nexport function getValidThemeIds() {\n    if (!validThemeIds) {\n        validThemeIds = new Set(flavors.map((f) => f.id));\n    }\n    return validThemeIds;\n}\n/**\n * Resolves a theme by ID, falling back to default if not found.\n *\n * @param themeId - The theme ID to resolve\n * @returns The matching theme, default theme, or first available theme\n */\nexport function resolveTheme(themeId) {\n    const themes = getThemes();\n    return (themes.find((t) => t.id === themeId) ||\n        themes.find((t) => t.id === DEFAULT_THEME) ||\n        themes[0]);\n}\n/**\n * Validates a theme ID for safety and format correctness.\n *\n * Accepts only alphanumeric characters, hyphens, and underscores.\n * Rejects special characters, unicode, and excessively long IDs.\n *\n * @param id - The value to validate as a theme ID\n * @returns True if the ID is valid, false otherwise\n */\nexport function isValidThemeId(id) {\n    if (typeof id !== 'string')\n        return false;\n    if (id.length === 0)\n        return false;\n    if (id.length > 100)\n        return false;\n    return /^[a-zA-Z0-9_-]+$/.test(id);\n}\n/**\n * Sanitizes a theme ID by removing unsafe characters.\n *\n * Removes any characters that could cause DOM/CSS/XSS issues.\n * Used as a fallback when displaying potentially untrusted input.\n *\n * @param id - The theme ID to sanitize\n * @returns The sanitized ID containing only safe characters\n */\nexport function sanitizeThemeId(id) {\n    return id.replace(/[^a-zA-Z0-9_-]/g, '');\n}\n/**\n * Resets the cached themes. Used for testing.\n * @internal\n */\nexport function _resetThemeCache() {\n    mappedThemes = null;\n    validThemeIds = null;\n}\n//# sourceMappingURL=theme-resolver.js.map","// SPDX-License-Identifier: MIT\n/**\n * Theme application logic\n */\nimport { DOM_IDS, DOM_SELECTORS, THEME_FAMILIES } from './constants.js';\nimport { getBaseUrl, applyThemeClass, loadThemeCSS, resolveAssetPath, getCurrentThemeFromClasses } from './theme-loader.js';\nimport { setItemActiveState } from './dropdown/helpers.js';\nimport { ThemeErrors, logThemeError } from './errors.js';\nimport { resolveTheme } from './theme-resolver.js';\n/**\n * Applies a theme to the document\n */\nexport async function applyTheme(doc, themeId) {\n    const theme = resolveTheme(themeId);\n    if (!theme) {\n        logThemeError(ThemeErrors.NO_THEMES_AVAILABLE());\n        return;\n    }\n    const baseUrl = getBaseUrl(doc);\n    // Add loading state to trigger button\n    const trigger = doc.getElementById(DOM_IDS.THEME_FLAVOR_TRIGGER);\n    if (trigger) {\n        trigger.classList.add('is-loading');\n    }\n    try {\n        // Apply theme class immediately (before CSS loading)\n        applyThemeClass(doc, theme.id);\n        // Load theme CSS\n        await loadThemeCSS(doc, theme, baseUrl);\n        // Update trigger button icon\n        const triggerIcon = doc.getElementById(DOM_IDS.THEME_FLAVOR_TRIGGER_ICON);\n        if (triggerIcon && theme.icon) {\n            try {\n                triggerIcon.src = resolveAssetPath(theme.icon, baseUrl);\n                const familyName = THEME_FAMILIES[theme.family].name;\n                triggerIcon.alt = `${familyName} ${theme.name}`;\n                triggerIcon.title = `${familyName} ${theme.name}`;\n            }\n            catch {\n                logThemeError(ThemeErrors.INVALID_ICON_PATH(theme.id));\n            }\n        }\n        // Update active state in dropdown\n        doc.querySelectorAll(DOM_SELECTORS.DROPDOWN_ITEMS).forEach((item) => {\n            setItemActiveState(item, item.getAttribute('data-theme-id') === theme.id);\n        });\n    }\n    finally {\n        if (trigger) {\n            trigger.classList.remove('is-loading');\n        }\n    }\n}\n/**\n * Gets the current theme from classes or returns default\n */\nexport function getCurrentTheme(doc, defaultTheme) {\n    return getCurrentThemeFromClasses(doc.documentElement) || defaultTheme;\n}\n//# sourceMappingURL=apply-theme.js.map","// SPDX-License-Identifier: MIT\n/**\n * Dropdown state management\n */\nimport { setItemActiveState, setTabindexBatch } from './helpers.js';\n/**\n * Creates dropdown state management functions.\n */\nexport function createDropdownStateManager(elements, state) {\n    const { trigger, dropdown } = elements;\n    const updateAriaExpanded = (expanded) => {\n        trigger.setAttribute('aria-expanded', String(expanded));\n    };\n    const focusMenuItem = (index) => {\n        if (index < 0 || index >= state.menuItems.length)\n            return;\n        const item = state.menuItems[index];\n        setTabindexBatch(state.menuItems, '-1');\n        item.setAttribute('tabindex', '0');\n        item.focus();\n        state.currentIndex = index;\n    };\n    const closeDropdown = (options = {}) => {\n        const { restoreFocus = true } = options;\n        dropdown.classList.remove('is-active');\n        updateAriaExpanded(false);\n        setTabindexBatch(state.menuItems, '-1');\n        state.currentIndex = -1;\n        if (restoreFocus) {\n            trigger.focus();\n        }\n    };\n    const toggleDropdown = (focusFirst = false) => {\n        const isActive = dropdown.classList.toggle('is-active');\n        updateAriaExpanded(isActive);\n        if (!isActive) {\n            state.currentIndex = -1;\n            setTabindexBatch(state.menuItems, '-1');\n            for (const menuItem of state.menuItems) {\n                const isActiveItem = menuItem.classList.contains('is-active');\n                setItemActiveState(menuItem, isActiveItem);\n            }\n        }\n        else if (focusFirst && state.menuItems.length > 0) {\n            focusMenuItem(0);\n        }\n    };\n    return { updateAriaExpanded, focusMenuItem, closeDropdown, toggleDropdown };\n}\n//# sourceMappingURL=state.js.map","// SPDX-License-Identifier: MIT\n/**\n * Dropdown event handlers\n */\n/**\n * Calculates the next index when navigating down through menu items.\n */\nfunction getNextIndex(currentIndex, totalItems) {\n    return currentIndex < totalItems - 1 ? currentIndex + 1 : 0;\n}\n/**\n * Calculates the previous index when navigating up through menu items.\n */\nfunction getPrevIndex(currentIndex, totalItems) {\n    return currentIndex > 0 ? currentIndex - 1 : totalItems - 1;\n}\n/**\n * Handles keyboard navigation on the trigger button.\n */\nfunction handleTriggerKeydown(e, dropdown, state, stateManager) {\n    const { focusMenuItem, toggleDropdown, updateAriaExpanded } = stateManager;\n    const totalItems = state.menuItems.length;\n    switch (e.key) {\n        case 'Enter':\n        case ' ':\n            e.preventDefault();\n            toggleDropdown(!dropdown.classList.contains('is-active'));\n            break;\n        case 'ArrowDown':\n            e.preventDefault();\n            if (!dropdown.classList.contains('is-active')) {\n                dropdown.classList.add('is-active');\n                updateAriaExpanded(true);\n                focusMenuItem(0);\n            }\n            else {\n                const nextIndex = state.currentIndex < 0 ? 0 : getNextIndex(state.currentIndex, totalItems);\n                focusMenuItem(nextIndex);\n            }\n            break;\n        case 'ArrowUp':\n            e.preventDefault();\n            if (!dropdown.classList.contains('is-active')) {\n                dropdown.classList.add('is-active');\n                updateAriaExpanded(true);\n                focusMenuItem(totalItems - 1);\n            }\n            else {\n                const startIndex = state.currentIndex < 0 ? totalItems - 1 : state.currentIndex;\n                focusMenuItem(getPrevIndex(startIndex, totalItems));\n            }\n            break;\n    }\n}\n/**\n * Handles keyboard navigation on menu items.\n */\nfunction handleMenuItemKeydown(e, index, item, state, stateManager) {\n    const { focusMenuItem, closeDropdown } = stateManager;\n    const totalItems = state.menuItems.length;\n    switch (e.key) {\n        case 'ArrowDown':\n            e.preventDefault();\n            focusMenuItem(getNextIndex(index, totalItems));\n            break;\n        case 'ArrowUp':\n            e.preventDefault();\n            focusMenuItem(getPrevIndex(index, totalItems));\n            break;\n        case 'Escape':\n            e.preventDefault();\n            closeDropdown();\n            break;\n        case 'Enter':\n        case ' ':\n            e.preventDefault();\n            item.click();\n            break;\n        case 'Home':\n            e.preventDefault();\n            focusMenuItem(0);\n            break;\n        case 'End':\n            e.preventDefault();\n            focusMenuItem(totalItems - 1);\n            break;\n    }\n}\n/**\n * Wires up all event handlers for the dropdown.\n */\nexport function wireDropdownEventHandlers(documentObj, elements, state, stateManager, abortController) {\n    const { trigger, dropdown } = elements;\n    const { closeDropdown, toggleDropdown } = stateManager;\n    const signal = abortController.signal;\n    // Trigger click\n    trigger.addEventListener('click', (e) => {\n        e.preventDefault();\n        toggleDropdown();\n    }, { signal });\n    // Outside click\n    documentObj.addEventListener('click', (e) => {\n        if (!dropdown.contains(e.target)) {\n            closeDropdown({ restoreFocus: false });\n        }\n    }, { signal });\n    // Escape key (document-level)\n    documentObj.addEventListener('keydown', (e) => {\n        if (e.key === 'Escape' && dropdown.classList.contains('is-active')) {\n            closeDropdown({ restoreFocus: true });\n        }\n    }, { signal });\n    // Trigger keyboard navigation\n    trigger.addEventListener('keydown', (e) => handleTriggerKeydown(e, dropdown, state, stateManager), { signal });\n    // Menu item keyboard navigation\n    for (const [index, item] of state.menuItems.entries()) {\n        item.addEventListener('keydown', (e) => handleMenuItemKeydown(e, index, item, state, stateManager), { signal });\n    }\n}\n//# sourceMappingURL=events.js.map","// SPDX-License-Identifier: MIT\n/**\n * Dropdown UI element creation\n */\nimport { setItemActiveState } from './helpers.js';\nimport { DOM_IDS, DOM_SELECTORS } from '../constants.js';\n/**\n * Creates a checkmark SVG icon for the active theme indicator.\n */\nexport function createCheckmarkIcon(doc) {\n    const svg = doc.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    svg.setAttribute('width', '16');\n    svg.setAttribute('height', '16');\n    svg.setAttribute('viewBox', '0 0 24 24');\n    svg.setAttribute('fill', 'none');\n    svg.setAttribute('stroke', 'currentColor');\n    svg.setAttribute('stroke-width', '3');\n    svg.setAttribute('stroke-linecap', 'round');\n    svg.setAttribute('stroke-linejoin', 'round');\n    const polyline = doc.createElementNS('http://www.w3.org/2000/svg', 'polyline');\n    polyline.setAttribute('points', '20 6 9 17 4 12');\n    svg.appendChild(polyline);\n    return svg;\n}\n/**\n * Creates a single theme item button element.\n */\nexport function createThemeItemElement(ctx, theme, familyMeta) {\n    const { documentObj, baseUrl, currentThemeId, selectEl, windowObj, closeDropdown, onThemeSelect } = ctx;\n    const item = documentObj.createElement('button');\n    item.type = 'button';\n    item.className = 'dropdown-item theme-item';\n    item.setAttribute('data-theme-id', theme.id);\n    item.setAttribute('data-appearance', theme.appearance);\n    item.setAttribute('role', 'menuitemradio');\n    item.setAttribute('aria-label', `${familyMeta.name} ${theme.name} (${theme.appearance}). ${theme.description}`);\n    item.setAttribute('tabindex', '-1');\n    const isActive = theme.id === currentThemeId;\n    setItemActiveState(item, isActive);\n    // Icon (only render if theme has an icon)\n    if (theme.icon) {\n        const icon = documentObj.createElement('img');\n        icon.className = 'theme-icon';\n        icon.src = baseUrl ? `${baseUrl}/${theme.icon}` : theme.icon;\n        icon.alt = `${familyMeta.name} ${theme.name}`;\n        icon.width = 24;\n        icon.height = 24;\n        item.appendChild(icon);\n    }\n    else {\n        // Add placeholder for consistent spacing\n        const placeholder = documentObj.createElement('span');\n        placeholder.className = 'theme-icon theme-icon-placeholder';\n        placeholder.setAttribute('aria-hidden', 'true');\n        item.appendChild(placeholder);\n    }\n    // Text content\n    const copy = documentObj.createElement('div');\n    copy.className = 'theme-copy';\n    const titleEl = documentObj.createElement('span');\n    titleEl.className = 'theme-title';\n    titleEl.textContent = `${familyMeta.name} Â· ${theme.name}`;\n    copy.appendChild(titleEl);\n    const descriptionEl = documentObj.createElement('span');\n    descriptionEl.className = 'theme-description';\n    descriptionEl.textContent = theme.description;\n    copy.appendChild(descriptionEl);\n    item.appendChild(copy);\n    // Checkmark for active state\n    const check = documentObj.createElement('span');\n    check.className = 'theme-check';\n    check.appendChild(createCheckmarkIcon(documentObj));\n    item.appendChild(check);\n    // Click handler\n    item.addEventListener('click', (e) => {\n        e.preventDefault();\n        onThemeSelect(theme.id);\n        if (selectEl) {\n            selectEl.value = theme.id;\n            selectEl.dispatchEvent(new Event('change', { bubbles: true }));\n        }\n        closeDropdown({ restoreFocus: true });\n    });\n    return item;\n}\n/**\n * Creates a family group container with header and theme items.\n */\nexport function createFamilyGroup(ctx, familyKey, themes, familyMeta, animationDelay) {\n    const { documentObj } = ctx;\n    if (themes.length === 0)\n        return null;\n    const items = [];\n    // Create family group container\n    const group = documentObj.createElement('div');\n    group.className = 'theme-family-group';\n    group.setAttribute('role', 'group');\n    group.setAttribute('aria-labelledby', `theme-family-${familyKey}`);\n    if (group.style && typeof group.style.setProperty === 'function') {\n        group.style.setProperty('--animation-delay', `${animationDelay}ms`);\n    }\n    // Create family header\n    const header = documentObj.createElement('div');\n    header.className = 'theme-family-header';\n    header.id = `theme-family-${familyKey}`;\n    const headerTitle = documentObj.createElement('span');\n    headerTitle.className = 'theme-family-name';\n    headerTitle.textContent = familyMeta.name;\n    header.appendChild(headerTitle);\n    group.appendChild(header);\n    // Create themes container\n    const themesContainer = documentObj.createElement('div');\n    themesContainer.className = 'theme-family-items';\n    themes.forEach((theme) => {\n        const item = createThemeItemElement(ctx, theme, familyMeta);\n        items.push(item);\n        themesContainer.appendChild(item);\n    });\n    group.appendChild(themesContainer);\n    return { group, items };\n}\n/**\n * Populates the dropdown menu with all theme family groups.\n */\nexport function populateDropdownMenu(ctx, dropdownMenu, themes, themeFamilies) {\n    const families = Object.keys(themeFamilies);\n    let animationDelay = 0;\n    families.forEach((familyKey) => {\n        const familyThemes = themes.filter((t) => t.family === familyKey);\n        const familyMeta = themeFamilies[familyKey];\n        if (!familyMeta)\n            return;\n        const result = createFamilyGroup(ctx, familyKey, familyThemes, familyMeta, animationDelay);\n        if (result) {\n            ctx.menuItems.push(...result.items);\n            dropdownMenu.appendChild(result.group);\n            animationDelay += 30;\n        }\n    });\n}\n/**\n * Wires up the native select element for theme selection.\n */\nexport function wireNativeSelect(ctx, selectEl, themes, defaultTheme) {\n    const { documentObj, windowObj, onThemeSelect } = ctx;\n    // Clear existing options\n    while (selectEl.firstChild) {\n        selectEl.removeChild(selectEl.firstChild);\n    }\n    // Populate options\n    themes.forEach((theme) => {\n        const option = documentObj.createElement('option');\n        option.value = theme.id;\n        option.textContent = theme.name;\n        option.selected = theme.id === ctx.currentThemeId;\n        selectEl.appendChild(option);\n    });\n    selectEl.disabled = false;\n    // Change handler\n    selectEl.addEventListener('change', (event) => {\n        const target = event.target;\n        const selectedThemeId = target?.value || defaultTheme;\n        onThemeSelect(selectedThemeId);\n    });\n}\n/**\n * Gets DOM elements required for the dropdown, returning null if any are missing.\n */\nexport function getDropdownElements(documentObj) {\n    const dropdownMenu = documentObj.getElementById(DOM_IDS.THEME_FLAVOR_MENU);\n    const trigger = documentObj.getElementById(DOM_IDS.THEME_FLAVOR_TRIGGER);\n    const dropdown = trigger?.closest(DOM_SELECTORS.NAVBAR_DROPDOWN);\n    const selectEl = documentObj.getElementById(DOM_IDS.THEME_FLAVOR_SELECT);\n    if (!dropdownMenu || !trigger || !dropdown) {\n        return null;\n    }\n    return { dropdownMenu, trigger, dropdown, selectEl };\n}\n//# sourceMappingURL=ui.js.map","// SPDX-License-Identifier: MIT\n/**\n * Navbar active state management\n */\nimport { DOM_SELECTORS } from './constants.js';\n/**\n * Normalizes a path by removing trailing slashes, defaulting to '/' if empty.\n */\nfunction normalizePath(path) {\n    return path.replace(/\\/$/, '') || '/';\n}\n/**\n * Initializes navbar active state based on current path\n */\nexport function initNavbar(documentObj) {\n    const currentPath = documentObj.location.pathname;\n    const normalizedCurrentPath = normalizePath(currentPath);\n    const navbarItems = documentObj.querySelectorAll(DOM_SELECTORS.NAVBAR_ITEM);\n    // Single pass: find matching item and collect items to deactivate\n    let matchingItem = null;\n    const itemsToDeactivate = [];\n    navbarItems.forEach((item) => {\n        const link = item;\n        if (!link.href)\n            return;\n        try {\n            const normalizedLinkPath = normalizePath(new URL(link.href).pathname);\n            if (normalizedCurrentPath === normalizedLinkPath) {\n                matchingItem = item;\n            }\n            else {\n                // Collect non-matching items with valid URLs for deactivation\n                itemsToDeactivate.push(item);\n            }\n        }\n        catch {\n            // Ignore invalid URLs\n        }\n    });\n    // Apply deactivation after finding match (single DOM batch)\n    for (const item of itemsToDeactivate) {\n        item.classList.remove('is-active');\n        item.removeAttribute('aria-current');\n    }\n    // Set active state for the matching link\n    if (matchingItem) {\n        matchingItem.classList.add('is-active');\n        matchingItem.setAttribute('aria-current', 'page');\n    }\n    // Handle Reports dropdown highlighting\n    const reportsLink = documentObj.querySelector(DOM_SELECTORS.NAV_REPORTS);\n    if (reportsLink) {\n        const reportPaths = [\n            '/coverage',\n            '/coverage-python',\n            '/coverage-swift',\n            '/coverage-ruby',\n            '/playwright',\n            '/playwright-examples',\n            '/lighthouse',\n        ];\n        const isOnReportsPage = reportPaths.some((path) => normalizedCurrentPath === path || normalizedCurrentPath.startsWith(path + '/'));\n        if (isOnReportsPage) {\n            reportsLink.classList.add('is-active');\n        }\n        else {\n            reportsLink.classList.remove('is-active');\n        }\n    }\n}\n// Only assign to window in browser context\nif (typeof window !== 'undefined') {\n    window.initNavbar = initNavbar;\n}\n//# sourceMappingURL=navbar.js.map","// SPDX-License-Identifier: MIT\n/**\n * Accessibility enhancements\n */\nimport { DOM_SELECTORS } from './constants.js';\n/**\n * Enhances accessibility for code blocks\n */\nexport function enhanceAccessibility(documentObj) {\n    documentObj.querySelectorAll(DOM_SELECTORS.HIGHLIGHT_PRE).forEach((pre) => {\n        if (!pre.hasAttribute('tabindex'))\n            pre.setAttribute('tabindex', '0');\n        if (!pre.hasAttribute('role'))\n            pre.setAttribute('role', 'region');\n        if (!pre.hasAttribute('aria-label'))\n            pre.setAttribute('aria-label', 'Code block');\n    });\n}\n//# sourceMappingURL=accessibility.js.map","// SPDX-License-Identifier: MIT\n/**\n * Theme selector package - main entry point\n */\nimport { migrateLegacyStorage, getSavedTheme, saveTheme, DEFAULT_THEME } from './storage.js';\nimport { getBaseUrl, getCurrentThemeFromClasses } from './theme-loader.js';\nimport { applyTheme, getCurrentTheme } from './apply-theme.js';\nimport { THEME_FAMILIES } from './constants.js';\nimport { getThemes, getValidThemeIds } from './theme-resolver.js';\nimport { createDropdownStateManager } from './dropdown/state.js';\nimport { wireDropdownEventHandlers } from './dropdown/events.js';\nimport { populateDropdownMenu, wireNativeSelect, getDropdownElements } from './dropdown/ui.js';\nimport { initNavbar } from './navbar.js';\nimport { enhanceAccessibility } from './accessibility.js';\nimport { ThemeErrors, logThemeError } from './errors.js';\n/**\n * Initializes theme system\n */\nexport async function initTheme(documentObj, windowObj) {\n    // Migrate legacy storage keys\n    migrateLegacyStorage(windowObj);\n    // Check if theme was already applied by blocking script\n    const initialTheme = windowObj.__INITIAL_THEME__;\n    const savedTheme = getSavedTheme(windowObj, getValidThemeIds());\n    // If blocking script already applied theme and it matches saved, just load CSS if needed\n    if (initialTheme && initialTheme === savedTheme) {\n        const currentTheme = getCurrentThemeFromClasses(documentObj.documentElement);\n        if (currentTheme === savedTheme) {\n            // Theme class already applied by blocking script, just ensure CSS is loaded\n            const themeLinkId = `theme-${savedTheme}-css`;\n            const themeLink = documentObj.getElementById(themeLinkId);\n            if (!themeLink) {\n                // CSS not loaded yet, load it now\n                await applyTheme(documentObj, savedTheme);\n            }\n            return;\n        }\n    }\n    // Otherwise, apply theme normally\n    await applyTheme(documentObj, savedTheme);\n}\n/**\n * Initializes and wires up the theme flavor selector dropdown.\n * Returns a Promise for API consistency with initTheme.\n */\nexport async function wireFlavorSelector(documentObj, windowObj) {\n    const abortController = new AbortController();\n    // Get required DOM elements\n    const elements = getDropdownElements(documentObj);\n    if (!elements) {\n        return { cleanup: () => abortController.abort() };\n    }\n    const { dropdownMenu, selectEl } = elements;\n    const baseUrl = getBaseUrl(documentObj);\n    const themes = getThemes();\n    // Initialize state\n    const state = {\n        currentIndex: -1,\n        menuItems: [],\n    };\n    // Get current theme (validated against available themes)\n    const currentThemeId = getSavedTheme(windowObj, getValidThemeIds()) ||\n        getCurrentTheme(documentObj, DEFAULT_THEME);\n    // Create state manager (needs elements and state)\n    const stateManager = createDropdownStateManager(elements, state);\n    // Create context for UI creation\n    const ctx = {\n        documentObj,\n        windowObj,\n        baseUrl,\n        currentThemeId,\n        selectEl,\n        menuItems: state.menuItems,\n        closeDropdown: stateManager.closeDropdown,\n        onThemeSelect: async (themeId) => {\n            saveTheme(windowObj, themeId, getValidThemeIds());\n            await applyTheme(documentObj, themeId);\n        },\n    };\n    // Wire native select if present\n    if (selectEl) {\n        wireNativeSelect(ctx, selectEl, themes, DEFAULT_THEME);\n    }\n    // Populate dropdown menu\n    populateDropdownMenu(ctx, dropdownMenu, themes, THEME_FAMILIES);\n    // Wire event handlers\n    wireDropdownEventHandlers(documentObj, elements, state, stateManager, abortController);\n    // Initialize state\n    stateManager.updateAriaExpanded(false);\n    elements.dropdown.classList.remove('is-active');\n    return { cleanup: () => abortController.abort() };\n}\n// Re-export navbar and accessibility functions\nexport { initNavbar, enhanceAccessibility };\n// Auto-initialize on DOMContentLoaded\nif (typeof document !== 'undefined' && typeof window !== 'undefined') {\n    document.addEventListener('DOMContentLoaded', async () => {\n        try {\n            await initTheme(document, window);\n            const { cleanup } = await wireFlavorSelector(document, window);\n            enhanceAccessibility(document);\n            // Register cleanup to run on teardown\n            const pagehideHandler = () => {\n                cleanup();\n                window.removeEventListener('pagehide', pagehideHandler);\n            };\n            window.addEventListener('pagehide', pagehideHandler);\n        }\n        catch (error) {\n            logThemeError(ThemeErrors.INIT_FAILED(error));\n        }\n    });\n}\n//# sourceMappingURL=index.js.map"],"names":["ErrorLevel","tokens","themes"],"mappings":"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"}