# @lgtm-hq/turbo-themes-adapter-tailwind

Tailwind CSS adapter for Turbo Themes. Maps Turbo theme tokens to Tailwind's theming
system via a preset.

## Overview

This adapter provides a Tailwind CSS preset that integrates Turbo Themes design tokens
with Tailwind's color and theming system. It enables dynamic theme switching while
maintaining full Tailwind utility class compatibility.

## Installation

```bash
npm install @lgtm-hq/turbo-themes tailwindcss
# or
bun add @lgtm-hq/turbo-themes tailwindcss
```

## Usage

### Basic Setup

Add the preset to your Tailwind configuration:

```typescript
// tailwind.config.ts
import type { Config } from 'tailwindcss';
import turboPreset from '@lgtm-hq/turbo-themes/adapters/tailwind/preset';

export default {
  presets: [turboPreset()],
  content: ['./src/**/*.{js,ts,jsx,tsx,html}'],
  // ... your config
} satisfies Config;
```

### With Specific Themes

```typescript
import turboPreset from '@lgtm-hq/turbo-themes/adapters/tailwind/preset';

export default {
  presets: [
    turboPreset({
      themes: ['catppuccin-mocha', 'catppuccin-latte', 'dracula'],
    }),
  ],
  content: ['./src/**/*.{js,ts,jsx,tsx,html}'],
};
```

### HTML Setup

Load the CSS files in your HTML:

```html
<!doctype html>
<html data-theme="catppuccin-mocha">
  <head>
    <!-- Turbo core variables -->
    <link rel="stylesheet" href="path/to/turbo-core.css" />

    <!-- Theme (changes the variables) -->
    <link rel="stylesheet" href="path/to/themes/catppuccin-mocha.css" />

    <!-- Your Tailwind output -->
    <link rel="stylesheet" href="path/to/output.css" />
  </head>
  <body>
    <!-- Your content -->
  </body>
</html>
```

### Dynamic Theme Switching

```javascript
function setTheme(themeId) {
  document.documentElement.setAttribute('data-theme', themeId);
}

// Switch to light theme
setTheme('catppuccin-latte');

// Switch back to dark
setTheme('catppuccin-mocha');
```

## Configuration Options

### `themes`

Array of theme IDs to include. If not specified, all available themes are included.

```typescript
turboPreset({
  themes: ['catppuccin-mocha', 'github-dark'],
});
```

### `prefix`

Custom prefix for generated utility classes.

```typescript
turboPreset({
  prefix: 'turbo',
});

// Generates: bg-turbo-base, text-turbo-primary, etc.
```

### `darkMode`

Dark mode configuration. Works with Tailwind's dark mode system.

```typescript
turboPreset({
  darkMode: 'class', // or 'media'
});
```

## Available Utility Classes

The preset extends Tailwind's color system with Turbo theme tokens:

### Background Colors

```html
<div class="bg-base">Base background</div>
<div class="bg-surface">Surface background</div>
<div class="bg-overlay">Overlay background</div>
```

### Text Colors

```html
<p class="text-primary">Primary text</p>
<p class="text-secondary">Secondary text</p>
<p class="text-inverse">Inverse text</p>
```

### Brand Colors

```html
<button class="bg-brand-primary text-inverse">Primary Button</button>
```

### State Colors

```html
<div class="bg-state-info">Info</div>
<div class="bg-state-success">Success</div>
<div class="bg-state-warning">Warning</div>
<div class="bg-state-danger">Danger</div>
```

### Border Colors

```html
<div class="border border-default">Default border</div>
```

### Link Colors

```html
<a class="text-accent-link hover:underline">Link text</a>
```

## How It Works

The adapter maps Turbo CSS custom properties to Tailwind's color system:

```css
/* Generated by the preset */
:root {
  --tw-turbo-bg-base: var(--turbo-bg-base);
  --tw-turbo-text-primary: var(--turbo-text-primary);
  /* ... */
}
```

This allows Tailwind utilities to reference theme-aware CSS variables that update
automatically when you change themes.

## Programmatic Usage

### Color Utilities

```typescript
import { colors } from '@lgtm-hq/turbo-themes/adapters/tailwind';

// Access color mappings
console.log(colors.bg.base); // 'var(--turbo-bg-base)'
console.log(colors.text.primary); // 'var(--turbo-text-primary)'
```

### Custom Preset Configuration

```typescript
import { createPreset } from '@lgtm-hq/turbo-themes/adapters/tailwind';

const customPreset = createPreset({
  themes: ['catppuccin-mocha'],
  extend: {
    colors: {
      custom: '#ff0000',
    },
  },
});
```

## Integration with Frameworks

### Next.js

```typescript
// tailwind.config.ts
import type { Config } from 'tailwindcss';
import turboPreset from '@lgtm-hq/turbo-themes/adapters/tailwind/preset';

const config: Config = {
  presets: [turboPreset()],
  content: [
    './pages/**/*.{js,ts,jsx,tsx,mdx}',
    './components/**/*.{js,ts,jsx,tsx,mdx}',
    './app/**/*.{js,ts,jsx,tsx,mdx}',
  ],
};

export default config;
```

### Vite + React

```typescript
// tailwind.config.ts
import turboPreset from '@lgtm-hq/turbo-themes/adapters/tailwind/preset';

export default {
  presets: [turboPreset()],
  content: ['./index.html', './src/**/*.{js,ts,jsx,tsx}'],
};
```

### Astro

```javascript
// tailwind.config.mjs
import turboPreset from '@lgtm-hq/turbo-themes/adapters/tailwind/preset';

export default {
  presets: [turboPreset()],
  content: ['./src/**/*.{astro,html,js,jsx,md,mdx,svelte,ts,tsx,vue}'],
};
```

## TypeScript Support

The adapter includes full TypeScript support:

```typescript
import type { TurboTailwindPresetOptions } from '@lgtm-hq/turbo-themes/adapters/tailwind';

const options: TurboTailwindPresetOptions = {
  themes: ['catppuccin-mocha', 'catppuccin-latte'],
  prefix: 'turbo',
};
```

## Troubleshooting

### Colors not updating on theme switch

Ensure you're loading the theme CSS files and that the `data-theme` attribute is set on
the `<html>` element:

```html
<html data-theme="catppuccin-mocha">
  <!-- ... -->
</html>
```

### Utility classes not working

Make sure the preset is loaded before any custom configuration:

```typescript
export default {
  presets: [turboPreset()], // Load first
  theme: {
    extend: {
      // Your extensions after
    },
  },
};
```

### PurgeCSS removing theme classes

Add Turbo theme classes to your safelist:

```typescript
export default {
  presets: [turboPreset()],
  safelist: [
    { pattern: /^bg-(base|surface|overlay)$/ },
    { pattern: /^text-(primary|secondary|inverse)$/ },
    { pattern: /^border-default$/ },
  ],
};
```

## API Reference

- `preset(options?)` - Default preset function
- `createPreset(options)` - Create a custom preset
- `colors` - Color mapping object
- `TurboTailwindPresetOptions` - TypeScript options type

## License

MIT
