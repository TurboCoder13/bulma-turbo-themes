// SPDX-License-Identifier: MIT
// Global theme overrides and customizations

@use '../variables' as *;

// Font family overrides
html {
  font-family: var(--theme-font-sans, var(--theme-font-stack, $theme-font-sans));
}

body,
.content {
  font-family: var(--theme-font-sans, var(--theme-font-stack, $theme-font-sans));
}

.title,
.content h1,
.content h2,
.content h3,
.content h4,
.content h5,
.content h6 {
  font-family: var(--theme-font-sans, var(--theme-font-stack, $theme-font-sans));
}

code,
kbd,
pre,
samp {
  font-family: var(--theme-font-mono, $theme-font-mono);
}

// Text color overrides
html,
body {
  color: var(--theme-text, $theme-text);
}

.content p {
  color: var(--theme-text, $theme-text);
}

// Heading colors
@for $i from 1 through 6 {
  .title.is-#{$i},
  h#{$i} {
    color: var(--theme-h#{$i});
  }

  .content h#{$i} {
    color: var(--theme-h#{$i});
  }
}

.label,
label {
  color: var(--theme-text, $theme-text);
}

// Link colors
.content a {
  color: var(--theme-link, $theme-link);
  transition: opacity 0.2s ease;
}

.content a:hover {
  opacity: 0.8;
}

// Blockquote styling
.content blockquote {
  border-left: 4px solid var(--theme-blockquote-border, $theme-blockquote-border);
  color: var(--theme-blockquote-fg, $theme-blockquote-fg);
  background: var(--theme-blockquote-bg, $theme-blockquote-bg);
  font-style: italic;
}

// Horizontal rule
.content hr,
hr {
  height: 0;
  border: 0;
  border-top: 2px solid var(--theme-h1, $theme-h1);
  background: none;
}

// Form accent colors
input[type='checkbox'],
input[type='radio'],
progress,
input[type='range'] {
  accent-color: var(--theme-link, $theme-link);
}

// Form validation
.input:invalid,
.textarea:invalid,
select:invalid,
input:invalid {
  border-color: var(--bulma-danger, $danger);
  box-shadow: none;
}

.input:valid,
.textarea:valid,
select:valid,
input:valid {
  border-color: var(--bulma-success, $success);
  box-shadow: none;
}

// Form focus
.input:focus,
.textarea:focus,
select:focus,
input:focus {
  border-color: var(--bulma-link, $link);
  box-shadow: 0 0 0 0.125em color-mix(in srgb, var(--bulma-link, $link), transparent 80%);
  outline: none;
}

.input:-moz-ui-invalid,
input:-moz-ui-invalid,
select:-moz-ui-invalid {
  border-color: var(--bulma-danger, $danger);
  box-shadow: none;
}

// Placeholder text
::placeholder {
  color: var(--theme-text-muted, $theme-text-muted);
  opacity: 1;
}

// Autofill styling
input:-webkit-autofill {
  -webkit-text-fill-color: var(--theme-text, $theme-text);
  box-shadow: 0 0 0 1000px var(--theme-surface-1, $theme-surface-1) inset !important;
  filter: none;
}

// File input styling
input[type='file']::file-selector-button {
  background: color-mix(in srgb, var(--theme-link, $theme-link) 10%, transparent);
  border: 1px solid var(--theme-link, $theme-link);
  color: var(--theme-text, $theme-text);
  padding: 0.35rem 0.6rem;
  border-radius: 0.4rem;
}

input[type='file']::file-selector-button:hover {
  background: color-mix(in srgb, var(--theme-link, $theme-link) 18%, transparent);
}

// Theme selector styling
#theme-flavor-select {
  padding-left: 2rem;
}

#theme-flavor-icon {
  display: none;
}

#theme-flavor-select option[data-icon] {
  background-repeat: no-repeat;
  background-size: 1rem 1rem;
  background-position: 0.5rem center;
  padding-left: 1.75rem;
}

#theme-flavor-select:hover {
  border-color: var(--bulma-link, $link);
  box-shadow: 0 0 0 0.125em color-mix(in srgb, var(--bulma-link, $link), transparent 80%);
}

// ============================================================================
// Theme Selector - Navbar-Cohesive Design
// ============================================================================

// Smooth animations for theme items
@keyframes theme-item-appear {
  from {
    opacity: 0;
    transform: translateY(-2px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

// Theme selector trigger (navbar link)
#theme-flavor-trigger {
  display: flex;
  align-items: center;
  gap: 6px;
  font-weight: 500;
  transition: all 0.15s ease;

  &:hover {
    color: var(--theme-link, $link) !important;
    background-color: var(--theme-surface-2, $theme-surface-2) !important;
  }

  &:focus {
    outline: 2px solid var(--theme-link, $link);
    outline-offset: 2px;
  }
}

// Theme trigger swatch (color preview) - simplified
.trigger-swatch {
  position: relative;
  width: 20px;
  height: 20px;
  border-radius: 4px;
  overflow: hidden;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);

  .trigger-swatch-bg {
    position: absolute;
    inset: 0;
    background: var(--swatch-bg);
  }

  .trigger-swatch-surface {
    position: absolute;
    top: 35%;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--swatch-surface);
    border-radius: 2px 2px 0 0;
  }

  .trigger-swatch-accent {
    position: absolute;
    bottom: 3px;
    left: 3px;
    width: 6px;
    height: 6px;
    background: var(--swatch-accent);
    border-radius: 50%;
  }
}

// Appearance indicator (sun/moon) - subtle
.trigger-appearance {
  font-size: 11px;
  line-height: 1;
  opacity: 0.8;
}

// Theme dropdown content - unified with navbar styling
#theme-flavor-menu {
  .dropdown-content {
    background: var(--theme-surface-1, $theme-surface-1) !important;
    border: 1px solid var(--theme-border, var(--theme-table-border, $theme-table-border)) !important;
    border-radius: var(--bulma-radius, 0.375rem) !important;
    box-shadow: 0 4px 6px rgba(10, 10, 10, 0.1);
    padding: 12px !important;
    min-width: 260px;
  }

  // Theme family group
  .theme-family-group {
    animation: theme-item-appear 0.15s ease backwards;
    animation-delay: var(--animation-delay, 0ms);

    &:not(:last-child) {
      margin-bottom: 16px;
      padding-bottom: 16px;
      border-bottom: 1px solid var(--theme-table-border, $theme-table-border);
    }
  }

  // Family header
  .theme-family-header {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 4px 8px 8px;
    margin-bottom: 8px;
  }

  .theme-family-name {
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(
      --theme-text-muted,
      color-mix(in srgb, var(--theme-text, $theme-text) 60%, transparent)
    );
  }

  // Theme items container
  .theme-family-items {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
  }

  // Individual theme item - Brainfish-inspired card row
  .dropdown-item.theme-item {
    position: relative;
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px 10px;
    background: transparent;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.15s ease;
    flex: 1 1 auto;
    min-width: 110px;

    &:hover {
      background: var(--theme-surface-2, $theme-surface-2);
    }

    &:focus {
      outline: 2px solid var(--theme-link, $theme-link);
      outline-offset: 2px;
      background: var(--theme-surface-2, $theme-surface-2);
    }

    &.is-active {
      background: color-mix(in srgb, var(--theme-link, $link) 6%, transparent);

      .theme-check {
        opacity: 1;
        transform: scale(1);
      }
    }
  }

  // Theme icon
  .theme-icon {
    flex-shrink: 0;
    width: 32px;
    height: 32px;
    border-radius: 9999px;
    background: color-mix(
      in srgb,
      var(--theme-icon-accent, var(--theme-link, $theme-link)) 20%,
      transparent
    );
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12);
  }

  // Theme copy (title + description)
  .theme-copy {
    display: flex;
    flex-direction: column;
    gap: 3px;
    min-width: 0;
  }

  .theme-title {
    font-size: 13px;
    font-weight: 500;
    color: var(--theme-text, $theme-text);
    transition: color 0.15s ease;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .theme-description {
    font-size: 11px;
    line-height: 1.3;
    color: var(
      --theme-text-muted,
      color-mix(in srgb, var(--theme-text, $theme-text) 65%, transparent)
    );
    max-width: 22rem;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
  }

  // Checkmark for active state - simplified
  .theme-check {
    position: absolute;
    right: 8px;
    top: 50%;
    transform: translateY(-50%) scale(0.9);
    opacity: 0;
    color: var(--theme-link, $link);
    transition: all 0.15s ease;
    display: flex;
    align-items: center;
    justify-content: center;

    svg {
      width: 14px;
      height: 14px;
    }
  }
}

// Dropdown active state animations - Apple-style
.dropdown.is-theme.is-active {
  .theme-flavor-trigger {
    background: color-mix(
      in srgb,
      var(--theme-surface-1, $theme-surface-1) 80%,
      transparent
    ) !important;
    border-color: color-mix(
      in srgb,
      var(--theme-table-border, $theme-table-border) 50%,
      transparent
    ) !important;
    box-shadow:
      0 2px 8px rgba(0, 0, 0, 0.12),
      0 0 0 0.5px rgba(0, 0, 0, 0.06) !important;
  }
}

// Themed native select (DDL) styling - visually distinct theme-aware design
.select.is-theme {
  // Enhanced visual styling for theme-aware selects
  select {
    background-color: var(--theme-surface-1, $theme-surface-1) !important;
    color: var(--theme-text, $theme-text) !important;
    border: 2px solid var(--theme-table-border, $theme-table-border) !important;
    border-radius: var(--bulma-radius, 0.375rem) !important;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05) !important;
    padding: 0.5em 2.5em 0.5em 0.75em !important;
    transition: all 0.2s ease !important;
    font-weight: 500 !important;

    // Custom arrow styling
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23666' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 0.75em center;
    background-size: 0.75em;
    filter: brightness(0) saturate(100%) invert(1);
    filter: var(--theme-select-arrow-filter, brightness(0) saturate(100%) invert(0.4));
  }

  select:hover {
    border-color: var(--theme-link, $theme-link) !important;
    box-shadow: 0 2px 4px color-mix(in srgb, var(--theme-link, $theme-link), transparent 85%) !important;
    background-color: var(--theme-surface-2, $theme-surface-2) !important;
  }

  select:focus {
    border-color: var(--theme-link, $theme-link) !important;
    box-shadow:
      0 0 0 0.125em color-mix(in srgb, var(--theme-link, $theme-link), transparent 80%),
      0 2px 4px color-mix(in srgb, var(--theme-link, $theme-link), transparent 85%) !important;
    outline: none !important;
    background-color: var(--theme-surface-1, $theme-surface-1) !important;
  }

  select:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }

  // Icon wrapper styling for theme-aware selects
  &.has-icons-left select {
    padding-left: 2.5em;
  }
}

// ============================================================================
// Table Styling
// ============================================================================

.table {
  background-color: var(--theme-table-cell-bg, var(--theme-surface-0, $theme-surface-0));
  border-color: var(--theme-table-border, $theme-table-border);

  thead {
    th {
      background-color: var(--theme-table-thead-bg, $theme-table-thead-bg);
      color: var(--theme-table-header-fg, var(--theme-text, $theme-text));
      border-color: var(--theme-table-border, $theme-table-border);
      font-weight: 600;
    }
  }

  tbody {
    tr {
      border-color: var(--theme-table-border, $theme-table-border);

      &:hover {
  background-color: var(--theme-table-stripe, $theme-table-stripe);
      }
    }
  }

  td,
  th {
  border-color: var(--theme-table-border, $theme-table-border);
    color: var(--theme-text, $theme-text);
  }

  &.is-striped tbody tr:nth-child(even) {
    background-color: var(--theme-table-stripe, $theme-table-stripe);
  }

  &.is-bordered {
    td,
    th {
      border: 1px solid var(--theme-table-border, $theme-table-border);
    }
  }
}

// ============================================================================
// Card Component
// ============================================================================

.card {
  background-color: var(--theme-card-bg, var(--theme-surface-1, $theme-surface-1));
  border: 1px solid var(--theme-card-border, var(--theme-table-border, $theme-table-border));
  border-radius: var(--bulma-radius-large, 0.5rem);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05), 0 1px 2px rgba(0, 0, 0, 0.1);

  .card-header {
    background-color: var(--theme-card-header-bg, var(--theme-surface-2, $theme-surface-2));
    border-bottom: 1px solid var(--theme-card-border, var(--theme-table-border, $theme-table-border));
    box-shadow: none;

    .card-header-title {
      color: var(--theme-text, $theme-text);
      font-weight: 600;
    }

    .card-header-icon {
      color: var(--theme-text-muted, $theme-text-muted);
    }
  }

  .card-content {
    background-color: transparent;
    color: var(--theme-text, $theme-text);
  }

  .card-footer {
    background-color: var(--theme-card-footer-bg, var(--theme-surface-1, $theme-surface-1));
    border-top: 1px solid var(--theme-card-border, var(--theme-table-border, $theme-table-border));

    .card-footer-item {
      color: var(--theme-link, $theme-link);
      border-color: var(--theme-card-border, var(--theme-table-border, $theme-table-border));

      &:hover {
        background-color: var(--theme-surface-2, $theme-surface-2);
      }
    }
  }
}

// ============================================================================
// Message Component
// ============================================================================
// Messages are colorful components meant to stand out. The header is a darker
// shade of the body color, and the body has a lighter tinted background.
// We preserve Bulma's colorful defaults for semantic variants.

.message {
  border-radius: var(--bulma-radius, 0.375rem);

  // Default (non-semantic) message styling uses theme tokens
  &:not(.is-primary):not(.is-link):not(.is-info):not(.is-success):not(.is-warning):not(.is-danger) {
    background-color: var(--theme-message-bg, var(--theme-surface-1, $theme-surface-1));
    border: 1px solid var(--theme-message-border, var(--theme-table-border, $theme-table-border));

    .message-header {
      background-color: var(--theme-message-header-bg, var(--theme-surface-2, $theme-surface-2));
      color: var(--theme-text, $theme-text);
      font-weight: 600;

      .delete {
        background-color: color-mix(in srgb, var(--theme-text, $theme-text) 20%, transparent);

        &:hover {
          background-color: color-mix(in srgb, var(--theme-text, $theme-text) 30%, transparent);
        }
      }
    }

    .message-body {
      color: var(--theme-message-body-fg, var(--theme-text, $theme-text));
      border-color: transparent;
      border-left: 4px solid var(--theme-message-border, var(--theme-table-border, $theme-table-border));
    }
  }

  // Semantic message colors - let Bulma handle the colorful styling
  // We only add minor adjustments for better dark theme compatibility
}

// ============================================================================
// Panel Component
// ============================================================================

.panel {
  background-color: var(--theme-panel-bg, var(--theme-surface-1, $theme-surface-1));
  border: 1px solid var(--theme-panel-border, var(--theme-table-border, $theme-table-border));
  border-radius: var(--bulma-radius, 0.375rem);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);

  .panel-heading {
    background-color: var(--theme-panel-header-bg, var(--theme-surface-2, $theme-surface-2));
    color: var(--theme-panel-header-fg, var(--theme-text, $theme-text));
    border-bottom: 1px solid var(--theme-panel-border, var(--theme-table-border, $theme-table-border));
    border-radius: var(--bulma-radius, 0.375rem) var(--bulma-radius, 0.375rem) 0 0;
    font-weight: 600;
    font-size: 1.1em;
  }

  .panel-tabs {
    border-bottom: 1px solid var(--theme-panel-border, var(--theme-table-border, $theme-table-border));

    a {
      color: var(--theme-text-muted, $theme-text-muted);
      border-bottom: 2px solid transparent;

      &:hover {
        color: var(--theme-link, $theme-link);
        border-bottom-color: var(--theme-link, $theme-link);
      }

      &.is-active {
        color: var(--theme-link, $theme-link);
        border-bottom-color: var(--theme-link, $theme-link);
      }
    }
  }

  .panel-block {
    background-color: var(--theme-panel-block-bg, var(--theme-surface-1, $theme-surface-1));
    color: var(--theme-text, $theme-text);
    border-bottom: 1px solid var(--theme-panel-border, var(--theme-table-border, $theme-table-border));

    &:hover {
      background-color: var(--theme-panel-block-hover-bg, var(--theme-surface-2, $theme-surface-2));
    }

    &.is-active {
      background-color: var(--theme-panel-block-active-bg, color-mix(in srgb, var(--theme-link, $theme-link) 15%, transparent));
      color: var(--theme-link, $theme-link);
      border-left: 3px solid var(--theme-link, $theme-link);

      .panel-icon {
        color: var(--theme-link, $theme-link);
      }
    }

    &:last-child {
      border-bottom: none;
      border-radius: 0 0 var(--bulma-radius, 0.375rem) var(--bulma-radius, 0.375rem);
    }

    .panel-icon {
      color: var(--theme-text-muted, $theme-text-muted);
    }
  }
}

// ============================================================================
// Box Component
// ============================================================================

.box {
  background-color: var(--theme-box-bg, var(--theme-surface-1, $theme-surface-1));
  border: 1px solid var(--theme-box-border, var(--theme-table-border, $theme-table-border));
  color: var(--theme-text, $theme-text);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05), 0 1px 2px rgba(0, 0, 0, 0.08);
}

// ============================================================================
// Notification Component
// ============================================================================
// Notifications are colorful alert components. Semantic variants (is-primary,
// is-info, is-success, is-warning, is-danger) should remain vibrant and
// colorful as Bulma intended. We only style the default (non-semantic) variant.

.notification {
  // Default (non-semantic) notification styling uses theme tokens
  &:not(.is-primary):not(.is-link):not(.is-info):not(.is-success):not(.is-warning):not(.is-danger):not(.is-light):not(.is-dark) {
    background-color: var(--theme-notification-bg, var(--theme-surface-1, $theme-surface-1));
    border: 1px solid var(--theme-notification-border, var(--theme-table-border, $theme-table-border));
    color: var(--theme-text, $theme-text);

    .delete {
      background-color: color-mix(in srgb, var(--theme-text, $theme-text) 20%, transparent);

      &:hover {
        background-color: color-mix(in srgb, var(--theme-text, $theme-text) 30%, transparent);
      }
    }
  }

  // Semantic notification colors - let Bulma handle the colorful styling
  // Bulma provides vibrant solid backgrounds with contrasting text
}

// ============================================================================
// Modal Component
// ============================================================================

.modal-background {
  background-color: var(--theme-modal-bg, rgba(10, 10, 10, 0.86));
}

.modal-card {
  background-color: var(--theme-modal-card-bg, var(--theme-surface-1, $theme-surface-1));
  border: 1px solid var(--theme-table-border, $theme-table-border);
  border-radius: var(--bulma-radius-large, 0.5rem);
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);

  .modal-card-head {
    background-color: var(--theme-modal-header-bg, var(--theme-surface-2, $theme-surface-2));
    border-bottom: 1px solid var(--theme-table-border, $theme-table-border);
    border-radius: var(--bulma-radius-large, 0.5rem) var(--bulma-radius-large, 0.5rem) 0 0;

    .modal-card-title {
      color: var(--theme-text, $theme-text);
      font-weight: 600;
    }
  }

  .modal-card-body {
    background-color: var(--theme-modal-card-bg, var(--theme-surface-1, $theme-surface-1));
    color: var(--theme-text, $theme-text);
  }

  .modal-card-foot {
    background-color: var(--theme-modal-footer-bg, var(--theme-surface-2, $theme-surface-2));
    border-top: 1px solid var(--theme-table-border, $theme-table-border);
    border-radius: 0 0 var(--bulma-radius-large, 0.5rem) var(--bulma-radius-large, 0.5rem);
  }
}

.modal-content {
  .box {
    background-color: var(--theme-modal-card-bg, var(--theme-surface-1, $theme-surface-1));
  }
}

// ============================================================================
// Dropdown Component
// ============================================================================

.dropdown-menu {
  .dropdown-content {
    background-color: var(--theme-dropdown-bg, var(--theme-surface-1, $theme-surface-1));
    border: 1px solid var(--theme-dropdown-border, var(--theme-table-border, $theme-table-border));
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);

    .dropdown-item {
      color: var(--theme-text, $theme-text);

      &:hover {
        background-color: var(--theme-dropdown-item-hover-bg, var(--theme-surface-2, $theme-surface-2));
        color: var(--theme-link, $theme-link);
      }

      &.is-active {
        background-color: var(--theme-link, $theme-link);
        color: #ffffff;
      }
    }

    .dropdown-divider {
      background-color: var(--theme-table-border, $theme-table-border);
    }

    a.dropdown-item {
      &:hover {
        background-color: var(--theme-dropdown-item-hover-bg, var(--theme-surface-2, $theme-surface-2));
        color: var(--theme-link, $theme-link);
      }
    }
  }
}

// ============================================================================
// Tabs Component
// ============================================================================

.tabs {
  border-bottom: 1px solid var(--theme-tabs-border, var(--theme-table-border, $theme-table-border));

  a {
    color: var(--theme-text, $theme-text);
    border-bottom-color: var(--theme-tabs-border, var(--theme-table-border, $theme-table-border));

    &:hover {
      color: var(--theme-link, $theme-link);
      border-bottom-color: var(--theme-link, $theme-link);
    }
  }

  li {
    &.is-active a {
      color: var(--theme-link, $theme-link);
      border-bottom-color: var(--theme-link, $theme-link);
    }
  }

  &.is-boxed {
    a {
      border-color: var(--theme-tabs-border, var(--theme-table-border, $theme-table-border));
      background-color: var(--theme-tabs-link-bg, var(--theme-surface-1, $theme-surface-1));

      &:hover {
        background-color: var(--theme-tabs-link-hover-bg, var(--theme-surface-2, $theme-surface-2));
        border-bottom-color: var(--theme-tabs-border, var(--theme-table-border, $theme-table-border));
      }
    }

    li.is-active a {
      background-color: var(--theme-tabs-link-active-bg, var(--theme-surface-0, $theme-surface-0));
      border-color: var(--theme-tabs-border, var(--theme-table-border, $theme-table-border));
      border-bottom-color: transparent;
    }
  }

  &.is-toggle {
    a {
      border-color: var(--theme-tabs-border, var(--theme-table-border, $theme-table-border));
      background-color: var(--theme-tabs-link-bg, var(--theme-surface-1, $theme-surface-1));
      color: var(--theme-text, $theme-text);

      &:hover {
        background-color: var(--theme-tabs-link-hover-bg, var(--theme-surface-2, $theme-surface-2));
        color: var(--theme-link, $theme-link);
      }
    }

    li.is-active a {
      background-color: var(--theme-link, $theme-link);
      border-color: var(--theme-link, $theme-link);
      color: #ffffff;
    }

    &.is-toggle-rounded li:first-child a {
      border-radius: 9999px 0 0 9999px;
    }

    &.is-toggle-rounded li:last-child a {
      border-radius: 0 9999px 9999px 0;
    }
  }
}

// ============================================================================
// Breadcrumb Component
// ============================================================================

.breadcrumb {
  a {
    color: var(--theme-link, $theme-link);

    &:hover {
      color: var(--theme-text, $theme-text);
    }
  }

  li {
    &.is-active a {
      color: var(--theme-text, $theme-text);
    }

    & + li::before {
      color: var(--theme-text-muted, $theme-text-muted);
    }
  }
}

// ============================================================================
// Menu Component
// ============================================================================

.menu {
  .menu-label {
    color: var(--theme-text-muted, $theme-text-muted);
    font-weight: 600;
    text-transform: uppercase;
    font-size: 0.75rem;
    letter-spacing: 0.05em;
  }

  .menu-list {
    a {
      color: var(--theme-text, $theme-text);
      border-radius: var(--bulma-radius-small, 0.25rem);

      &:hover {
        background-color: var(--theme-surface-2, $theme-surface-2);
        color: var(--theme-link, $theme-link);
      }

      &.is-active {
        background-color: var(--theme-link, $theme-link);
        color: #ffffff;
      }
    }
  }
}

// Input styling
.input:not(.is-success):not(.is-danger),
.textarea:not(.is-success):not(.is-danger),
.select:not(.is-success):not(.is-danger) select,
.button.is-light {
  background-color: var(--theme-surface-1, $theme-surface-1);
  color: var(--theme-text, $theme-text);
  border-color: var(--theme-table-border, $theme-table-border);
}

.input:not(.is-success):not(.is-danger):focus,
.textarea:not(.is-success):not(.is-danger):focus,
.select:not(.is-success):not(.is-danger) select:focus {
  border-color: var(--bulma-link, $link);
  box-shadow: 0 0 0 0.125em color-mix(in srgb, var(--bulma-link, $link), transparent 80%);
}

// Theme buttons
.button:not(.is-primary):not(.is-link):not(.is-info):not(.is-success):not(.is-warning):not(
    .is-danger
  ):not(.is-light):not(.is-white):not(.is-dark):not(.is-black):not(.is-text):not(.is-ghost) {
  background-color: var(--theme-surface-1, $theme-surface-1);
  color: var(--theme-text, $theme-text);
  border-color: var(--theme-table-border, $theme-table-border);
}

.button:not(.is-primary):not(.is-link):not(.is-info):not(.is-success):not(.is-warning):not(
    .is-danger
  ):not(.is-light):not(.is-white):not(.is-dark):not(.is-black):not(.is-text):not(.is-ghost):hover {
  border-color: var(--theme-link, $theme-link);
  color: var(--theme-text, $theme-text);
}

// Navbar theme overrides - override Bulma's CSS variables for theme-aware colors
.navbar {
  background-color: var(--theme-surface-0, $theme-surface-0) !important;
  border-bottom: 1px solid var(--theme-border, var(--theme-table-border, $theme-table-border)) !important;
  // Override Bulma's navbar color variables
  --bulma-navbar-background-color: var(--theme-surface-0, $theme-surface-0);
  --bulma-navbar-item-color: var(--theme-text, $theme-text);
  --bulma-navbar-item-hover-background-l-delta: 0.05;
  --bulma-navbar-item-active-background-l-delta: 0.1;
}

.navbar-item,
.navbar-link {
  color: var(--theme-text, $theme-text) !important;
  // Override Bulma's computed navbar item colors
  --bulma-navbar-item-color-l: var(--bulma-text-l);
}

.navbar-item.is-active,
.navbar-link.is-active {
  color: var(--theme-link, $theme-link) !important;
  background-color: transparent !important;
  // Override Bulma's active state variables
  --bulma-navbar-item-color-l: var(--bulma-link-l);
}

.navbar-link:not(.is-arrowless)::after {
  border-color: var(--theme-link, $theme-link) !important;
}

.navbar-dropdown {
  background-color: var(--theme-surface-1, $theme-surface-1) !important;
  border-top: 1px solid var(--theme-border, var(--theme-table-border, $theme-table-border)) !important;
  box-shadow: 0 4px 6px rgba(10, 10, 10, 0.1);
  // Override Bulma's dropdown background
  --bulma-navbar-dropdown-background-color: var(--theme-surface-1, $theme-surface-1);
}

.navbar-dropdown .navbar-item {
  color: var(--theme-text, $theme-text) !important;
  background-color: transparent !important;
  border: none;
}

.navbar-dropdown .navbar-item:hover {
  background-color: var(--theme-surface-2, $theme-surface-2) !important;
  color: var(--theme-link, $theme-link) !important;
}

.navbar-dropdown .navbar-item.is-active {
  background-color: var(--theme-surface-2, $theme-surface-2) !important;
  color: var(--theme-link, $theme-link) !important;
}

.navbar-item:hover,
.navbar-link:hover {
  background-color: var(--theme-surface-2, $theme-surface-2) !important;
  color: var(--theme-link, $theme-link) !important;
}

a.navbar-item:hover,
a.navbar-item.is-active,
.navbar-link:hover,
.navbar-link.is-active {
  background-color: var(--theme-surface-2, $theme-surface-2) !important;
  color: var(--theme-link, $theme-link) !important;
}

// ============================================================================
// Mobile Navbar Styles
// ============================================================================

// Burger menu theme colors
.navbar-burger {
  color: var(--theme-text, $theme-text) !important;

  span {
    background-color: var(--theme-text, $theme-text) !important;
  }

  &:hover {
    background-color: var(--theme-surface-2, $theme-surface-2) !important;
  }
}

// Mobile navbar menu styling
@media screen and (max-width: 1023px) {
  .navbar-menu {
    background-color: var(--theme-surface-1, $theme-surface-1) !important;
    box-shadow: 0 8px 16px rgba(10, 10, 10, 0.1);
    padding: 0.5rem 0;

    &.is-active {
      display: block;
    }
  }

  // Theme dropdown in mobile - make it full width and inline
  .navbar-item.has-dropdown {
    .navbar-dropdown {
      display: none;
      position: static !important;
      background-color: transparent !important;
      border: none !important;
      box-shadow: none !important;
      padding-left: 1rem;
    }

    &.is-active .navbar-dropdown,
    &.is-hoverable:hover .navbar-dropdown {
      display: block;
    }
  }

  // Theme selector mobile adjustments
  #theme-flavor-menu {
    &.is-right {
      left: 0;
      right: auto;
    }

    .dropdown-content {
      min-width: auto !important;
      max-width: 100%;
      border: none !important;
      box-shadow: none !important;
      background: transparent !important;
      padding: 8px 0 !important;
    }

    .theme-family-group {
      padding: 0 8px;

      &:not(:last-child) {
        margin-bottom: 12px;
        padding-bottom: 12px;
      }
    }

    .theme-family-items {
      flex-direction: column;
    }

    .dropdown-item.theme-item {
      width: 100%;
      min-width: auto;
    }
  }
}
