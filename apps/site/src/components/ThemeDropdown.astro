---
/**
 * Theme dropdown component for selecting themes.
 * Renders groups and options from the shared theme metadata.
 */
import { themeGroups, themeNames, themeIcons } from '../data/theme-meta';

const baseUrl = import.meta.env.BASE_URL.replace(/\/$/, '');
---

<div class="theme-dropdown" id="theme-dropdown">
  <button
    class="theme-trigger"
    id="theme-trigger"
    aria-expanded="false"
    aria-haspopup="listbox"
    data-testid="theme-trigger"
  >
    <span class="visually-hidden">Select theme: </span>
    <img
      class="theme-trigger-icon"
      id="theme-trigger-icon"
      src={`${baseUrl}/assets/img/catppuccin-logo-macchiato.png`}
      alt=""
      width="20"
      height="20"
    />
    <span class="theme-label" id="theme-label">Mocha</span>
  </button>
  <div
    class="theme-menu"
    id="theme-menu"
    role="listbox"
    aria-label="Theme options"
  >
    {themeGroups.map((group) => (
      <div class="theme-group">
        <div class="theme-group-label">{group.displayName}</div>
        {group.flavors.map((themeId) => (
          <button class="theme-option" data-theme={themeId} role="option">
            <img
              class="theme-icon"
              src={`${baseUrl}/assets/img/${themeIcons[themeId]}`}
              alt={group.displayName}
              width="20"
              height="20"
            />
            {themeNames[themeId]}
          </button>
        ))}
      </div>
    ))}
  </div>
</div>
