---
/**
 * Site header component with navigation, theme dropdown, and search.
 */
import ThemeDropdown from './ThemeDropdown.astro';
import SearchDropdown from './SearchDropdown.astro';

interface Props {
  siteTitle?: string;
}

const { siteTitle = 'Turbo Themes Demo' } = Astro.props;
const baseUrl = import.meta.env.BASE_URL.replace(/\/$/, '');
---

<header class="header">
  <div class="container header-content">
    <a href={`${baseUrl}/`} class="logo" data-testid="navbar-brand">
      <span class="logo-icon">âœ¦</span>
      <span class="logo-text">{siteTitle}</span>
    </a>

    <nav class="nav" role="navigation" aria-label="main navigation">
      <button
        class="menu-toggle"
        id="menu-toggle"
        aria-label="Toggle menu"
        aria-expanded="false"
      >
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 12h18M3 6h18M3 18h18"></path>
        </svg>
      </button>

      <ul class="nav-links" id="nav-links">
        <li>
          <a href={`${baseUrl}/`} class="nav-link" data-testid="nav-home">Home</a>
        </li>
        <li>
          <a href={`${baseUrl}/themes/`} class="nav-link" data-testid="nav-themes">Themes</a>
        </li>
        <li>
          <a href={`${baseUrl}/components/`} class="nav-link" data-testid="nav-components">Components</a>
        </li>
        <li>
          <a href={`${baseUrl}/examples/`} class="nav-link" data-testid="nav-examples">Examples</a>
        </li>
        <li class="nav-dropdown">
          <button class="nav-dropdown-trigger" data-testid="nav-docs">
            Docs
            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M6 9l6 6 6-6"></path>
            </svg>
          </button>
          <div class="nav-dropdown-menu nav-dropdown-docs">
            <a href={`${baseUrl}/docs/`} class="nav-dropdown-item">
              <span class="nav-dropdown-icon">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                  <polyline points="9 22 9 12 15 12 15 22"></polyline>
                </svg>
              </span>
              Overview
            </a>
            <div class="nav-dropdown-divider"></div>
            <a href={`${baseUrl}/docs/getting-started/`} class="nav-dropdown-item">Getting Started</a>
            <a href={`${baseUrl}/docs/installation/`} class="nav-dropdown-item">Installation</a>
            <a href={`${baseUrl}/docs/integrations/`} class="nav-dropdown-item">Integrations</a>
            <a href={`${baseUrl}/docs/api-reference/`} class="nav-dropdown-item">API Reference</a>
            <a href={`${baseUrl}/docs/guides/`} class="nav-dropdown-item">Guides</a>
            <a href={`${baseUrl}/docs/contributing/`} class="nav-dropdown-item">Contributing</a>
          </div>
        </li>
        <li class="nav-dropdown">
          <button class="nav-dropdown-trigger" data-testid="nav-reports">
            Reports
            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M6 9l6 6 6-6"></path>
            </svg>
          </button>
          <div class="nav-dropdown-menu">
            <a href={`${baseUrl}/coverage/`} class="nav-dropdown-item" target="_blank" rel="noopener" data-testid="nav-reports-coverage">
              Coverage (JS)
            </a>
            <a href={`${baseUrl}/coverage-python/`} class="nav-dropdown-item" target="_blank" rel="noopener">
              Coverage (Python)
            </a>
            <a href={`${baseUrl}/coverage-swift/`} class="nav-dropdown-item" target="_blank" rel="noopener">
              Coverage (Swift)
            </a>
            <a href={`${baseUrl}/coverage-ruby/`} class="nav-dropdown-item" target="_blank" rel="noopener">
              Coverage (Ruby)
            </a>
            <a href={`${baseUrl}/playwright/`} class="nav-dropdown-item" target="_blank" rel="noopener" data-testid="nav-reports-playwright">
              Playwright (E2E)
            </a>
            <a href={`${baseUrl}/playwright-examples/`} class="nav-dropdown-item" target="_blank" rel="noopener" data-testid="nav-reports-playwright-examples">
              Playwright (Examples)
            </a>
            <a href={`${baseUrl}/lighthouse/`} class="nav-dropdown-item" target="_blank" rel="noopener" data-testid="nav-reports-lighthouse">
              Lighthouse
            </a>
          </div>
        </li>
        <li>
          <a
            href="https://github.com/lgtm-hq/turbo-themes"
            class="nav-link nav-link-external"
            target="_blank"
            rel="noopener"
            data-testid="nav-github"
          >
            GitHub
            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M7 17L17 7M17 7H7M17 7V17"></path>
            </svg>
          </a>
        </li>
      </ul>
    </nav>

    <div class="nav-controls">
      <SearchDropdown />
      <ThemeDropdown />
    </div>
  </div>
</header>
